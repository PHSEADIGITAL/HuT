<%- include("partials/header", { title: "Complete Payment" }) %>

<section class="hero small">
  <h1>Complete your payment</h1>
  <p>Your booking was created and is waiting for verified webhook confirmation.</p>
</section>

<section class="card">
  <div class="summary-grid">
    <div>
      <span class="label">Booking ID</span>
      <span><%= booking.id %></span>
    </div>
    <div>
      <span class="label">Status</span>
      <span><%= booking.status %> / <%= booking.paymentStatus %></span>
    </div>
    <div>
      <span class="label">Stay</span>
      <span><%= booking.checkInDate %> to <%= booking.checkOutDate %></span>
    </div>
    <div>
      <span class="label">Total amount</span>
      <span><strong><%= formatNaira(booking.pricing.totalPaid) %></strong></span>
    </div>
  </div>
</section>

<section class="card">
  <% if (booking.paymentStatus === "pending_verification") { %>
    <p class="muted">
      Your payment callback has been received. Do not pay again. We are waiting for verified
      webhook confirmation from the payment provider.
    </p>
  <% } else if (paymentSession && paymentSession.paymentUrl) { %>
    <p>
      Click below to pay with <strong><%= paymentSession.provider %></strong>.
    </p>
    <a class="button-link" href="<%= paymentSession.paymentUrl %>" target="_blank" rel="noopener noreferrer">
      Continue to secure payment
    </a>
    <p class="muted tiny">
      After payment, your status becomes pending verification until the provider webhook is confirmed.
    </p>
  <% } else { %>
    <p class="muted">
      Payment link is unavailable. Please contact support to restore your booking payment session.
    </p>
  <% } %>
</section>

<%- include("partials/footer", { platform }) %>
